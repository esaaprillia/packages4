--- a/ml_dtypes/__init__.py
+++ b/ml_dtypes/__init__.py
@@ -12,7 +12,7 @@
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
-__version__ = "0.5.1"  # Keep in sync with pyproject.toml:version
+__version__ = "0.5.1"
 __all__ = [
     "__version__",
     "bfloat16",
diff --git a/pyproject.toml b/pyproject.toml
index c040eb32..efdc9e23 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -1,6 +1,6 @@
 [project]
 name = "ml_dtypes"
-version = "0.5.1"  # Keep in sync with ml_dtypes/__init__.py:__version__
+dynamic = ["version"]  # Load from ml_dtypes.__version__.
 description = ""
 readme = "README.md"
 requires-python = ">=3.9"
@@ -60,6 +60,8 @@ build-backend = "setuptools.build_meta"
 packages = ["ml_dtypes"]
 include-package-data = false
 
+[tool.setuptools.dynamic]
+version = {attr = "ml_dtypes.__version__"}
+
 [tool.setuptools.package-data]
 ml_dtypes = ["py.typed"]
-"ml_dtypes.include" = ["*.h"]
